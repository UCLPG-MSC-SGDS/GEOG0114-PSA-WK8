<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introduction to Suitability Mapping</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">GEOG0114: Principles of Spatial Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">1. Getting Started</a>
</li>
<li>
  <a href="classification.html">2. Suitability by Classification</a>
</li>
<li>
  <a href="ahp.html">3. Analytical Hierarchy Process (AHP)</a>
</li>
<li>
  <a href="recommendations.html">4. Recommended Readings</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Introduction to Suitability Mapping</h1>
<h4 class="date">Week 8: 29/11/2021</h4>

</div>


<style type: "text/css">
h1.title {
    font-size: 20px;
}

h4.date {
    font-size: 18px;
}

h1 {
    font-size: 18px;
}

h2 {
    font-size: 18px;
}

body{/* Normal */
    font-size: 13px;
    text-align: justify;
}

p.comment {
background-color: #DBDBDB;
padding: 10px;
border: 1px solid black;
border-radius: 5px;
}

code.r{
  font-size: 10px;
}

pre code, pre, code {
  font-size: 12px;
  white-space: pre !important;
  overflow-x: scroll !important;
  word-break: keep-all !important;
  word-wrap: initial !important;
}

</style>
<hr style="border:2px solid gray">
</hr>
<div id="lets-begin" class="section level2">
<h2><strong>1.1. Let’s begin</strong></h2>
<p><strong>Background</strong>: Risk models derived from environmental, sociodemographic and topological factors are becoming increasingly available for open research. Such models have broadly shown to be useful in delineating geographical areas of risk or suitability for a certain outcomes. So far, we have covered different ways for modelling the spatial distribution of outcomes and estimating its occurrence or risk, we have explored this through areal-based, geostatistical and nonparametric methods. Today, we are going to explore this from a different lens using a knowledge-driven approach.</p>
<p><strong>OBJECTIVES</strong>: To provide an introductory overview to the applicability of knowledge-driven methods, in particular, we are going to learn the <strong>Multi-Criteria Decision Approach (MCDA)</strong> which is a method that use decision rules from existing knowledge to identify areas potential suitability for an outcome. It is especially useful in data-sparse situations, or when for the first time exploring the potential geographical limits of certain outcome. For instance, using modest number of raster layers such as population density, urbanisation, approximating to street segments, house prices and deprivation; it is possible to combine such information so to determine regions for which crime events such as burglaries are likely to occur, or suitable in that matter. This approach has been widely used in a number of disciplines over the last decades, and has gained prominence in public health related fields such as vector-borne disease prevention, and disaster sciences such as landslides. We will learn how to apply these methods to the two context.</p>
<p></br></p>
</div>
<div id="data-sets-setting-up-the-work-directory" class="section level2">
<h2><strong>1.2. Data sets &amp; setting up the work directory</strong></h2>
<p>Before you begin do make sure to download all data from <a href="https://github.com/UCLPG-MSC-SGDS/GEOG0114-PSA-WK8/blob/main/Datasets.zip?raw=true"><strong>HERE</strong></a>. If you are working from a UCL workstation, do create a folder called “<strong>Week 8</strong>” within your “<strong>GEOG0114</strong>” folder stored in the N-drive. Extract all data from the zip folder and stored into “<strong>Week 8</strong>” folder. Open a new R script and set the work directory to <strong>Week 8’s</strong> folder (i.e., <strong>Home (N:) &gt; GEOG0114 &gt; Week 8</strong>)</p>
<pre class="r"><code># Set working directory to Week 6 folder
setwd(&quot;N:/GEOG0114/Week 8&quot;)</code></pre>
<p></br></p>
</div>
<div id="loading-and-installing-packages" class="section level2">
<h2><strong>1.3. Loading and installing packages</strong></h2>
<p>We will need to load the following packages:</p>
<ul>
<li><code>sf</code>: Simple Features</li>
<li><code>tmap</code>: Thematic Mapping</li>
<li><code>raster</code>: Raster/gridded data analysis and manipulation</li>
<li><code>sp</code>: Package for providing classes for spatial data (points, lines, polygons and grids)</li>
</ul>
<pre class="r"><code># Load packages using library() function
library(&quot;sf&quot;)
library(&quot;tmap&quot;)
library(&quot;raster&quot;)
library(&quot;sp&quot;)</code></pre>
<p>The above packages <code>sf</code>, <code>tmap</code>, <code>raster</code> &amp; <code>sp</code> should have been installed in the previous session(s). We will need to install a new package:</p>
<ul>
<li><code>spatialEco</code> - Spatial Analysis and Modelling Utilities package, which provides the user further functions such as <code>raster.invert()</code> which we will need in the third section.</li>
<li><code>BAMMtools</code> - It provides the user access to an important function <code>getJenksBreaks()</code> for the <code>AHP</code> analysis in the third section.</li>
</ul>
<pre class="r"><code># Install the packages: spatialEco using the install.package()
install.packages(&quot;spatialEco&quot;)
install.packages(&quot;BAMMtools&quot;)

# Load the packages with library()
library(&quot;spatialEco&quot;)
library(&quot;BAMMtools&quot;)</code></pre>
<p></br></p>
</div>
<div id="loading-datasets" class="section level2">
<h2><strong>1.4. Loading datasets</strong></h2>
<p>We will be dealing with raster data only for this exercise. These will be a series of climate, environmental and other social-anthropogenic gridded data from Kenya. We are going to combine them in order to determine areas that are suitable for disease transmission of <a href="https://www.cdc.gov/parasites/lymphaticfilariasis/index.html"><strong>Lymphatic Filariasis</strong></a>, a neglected tropical disease, caused by a range of mosquitoes that spread the parasitic worms called the <strong><em>Wuchereria bancrofti</em></strong> through a mosquito bite.</p>
<p>There is evidence that indicates that precipitation, temperature, population density, aridity, dryness, land surface elevation and vegetation are risk factors for mosquito infestation, and in turn, greatly influencing the way mosquitoes breed and feeding behaviour within human dwellings thus maintaining disease transmission. We will use the following techniques for mapping areas of suitability:</p>
<ul>
<li>Binary Classification &amp; Ranking</li>
<li>Suitability Mapping using Weighted Overlay Analysis</li>
<li>MCDA Mapping</li>
</ul>
<p>Lets begin loading the following list of raster files, each is a variable of interest:</p>
<ul>
<li>Raster: Mean Temperature in Kenya (1000m resolution) named <code>Kenya Mean Teperature.tif</code></li>
<li>Raster: Normalized Difference Vegetation Index in Kenya (1000m resolution) named <code>Kenya NDVI.tif</code></li>
<li>Raster: Precipitation in Kenya (1000m resolution) named <code>Kenya Precipitation.tif</code></li>
<li>Raster: Population Density in Kenya (1000m resolution) named <code>Kenya Population Density.tif</code></li>
<li>Raster: Land Surface Elevation in Kenya (1000m resolution) named <code>Kenya Elevation.tif</code></li>
<li>Raster: Levels of Dryness in Kenya (1000m resolution) named <code>Kenya Aridity Index.tif</code></li>
</ul>
<pre class="r"><code>temp &lt;- raster(&quot;Kenya Mean Teperature.tif&quot;)
nvdi &lt;- raster(&quot;Kenya NDVI.tif&quot;)
prec &lt;- raster(&quot;Kenya Precipitation.tif&quot;)
popl &lt;- raster(&quot;Kenya Population Density.tif&quot;)
elev &lt;- raster(&quot;Kenya Elevation.tif&quot;)
arid &lt;- raster(&quot;Kenya Aridity Index.tif&quot;)
# ignore those stupid warning messages as these are annoying as hell and are related to same migration/updates done on PROJ4 to PROJ6 - which I can&#39;t for the life of me figure out how to implement this bloody update.</code></pre>
<p>Load the shapefile nation and state borders for Kenya:</p>
<ul>
<li>Shape file: Kenya’s National border named <code>Kenya_Border_3857.shp</code></li>
<li>Shape file: Kenya’s State border named <code>Kenya_States_3857.shp</code></li>
</ul>
<pre class="r"><code># load the shapefiles
kenya_border &lt;- st_read(&quot;Kenya_Border_3857.shp&quot;)</code></pre>
<pre><code>## Reading layer `Kenya_Border_3857&#39; from data source 
##   `/Users/anwarmusah/Documents/GITHUB/UCLPG-MSC-SGDS/Dataset/T1_WK8/Kenya_Border_3857.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 1 feature and 2 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 3774798 ymin: -526069.9 xmax: 4667205 ymax: 564140.5
## Projected CRS: WGS 84 / Pseudo-Mercator</code></pre>
<pre class="r"><code>kenya_states &lt;- st_read(&quot;Kenya_States_3857.shp&quot;)</code></pre>
<pre><code>## Reading layer `Kenya_States_3857&#39; from data source 
##   `/Users/anwarmusah/Documents/GITHUB/UCLPG-MSC-SGDS/Dataset/T1_WK8/Kenya_States_3857.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 47 features and 10 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 3774798 ymin: -526069.9 xmax: 4667205 ymax: 564140.5
## Projected CRS: WGS 84 / Pseudo-Mercator</code></pre>
<p class="comment">
<strong>IMPORTANT NOTES</strong>: All shape file and raster data were in projected to the CRS: Spherical mercator 3857
</p>
<p>You can inspect each raster to know its dimension, extent, resolution and minimum and maximum values. Since are going to stack all the rasters together, you definitely want the: <code>dimension</code>, <code>extent</code> and <code>resolution</code> to be the same. If there’s a slight difference the stack won’t work.</p>
<pre class="r"><code># for instance temp and aridity
temp</code></pre>
<pre><code>## class      : RasterLayer 
## dimensions : 1090, 892, 972280  (nrow, ncol, ncell)
## resolution : 1000, 1000  (x, y)
## extent     : 3774798, 4666798, -526069.9, 563930.1  (xmin, xmax, ymin, ymax)
## crs        : +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs 
## source     : Kenya Mean Teperature.tif 
## names      : Kenya_Mean_Teperature 
## values     : 1.2, 29.6  (min, max)</code></pre>
<pre class="r"><code>arid</code></pre>
<pre><code>## class      : RasterLayer 
## dimensions : 1090, 892, 972280  (nrow, ncol, ncell)
## resolution : 1000, 1000  (x, y)
## extent     : 3774798, 4666798, -526069.9, 563930.1  (xmin, xmax, ymin, ymax)
## crs        : +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs 
## source     : Kenya Aridity Index.tif 
## names      : Kenya_Aridity_Index 
## values     : 0.0835, 2.7548  (min, max)</code></pre>
<p>To visualize raster data - you can write the following code:</p>
<pre class="r"><code># For instance take the mean temperature for Kenya
# Spectral colours are useful for diverging scales &quot;Spectral&quot; is Rd-Or-Yl-Gr-Bu. &quot;-Spectral&quot; reverses the order
tm_shape(temp) + tm_raster(style = &quot;cont&quot;, title = &quot;Mean Temperature&quot;, palette= &quot;-Spectral&quot;) +
    tm_shape(kenya_states) + tm_polygons(alpha = 0, border.col = &quot;black&quot;) +
    tm_layout(frame = FALSE, legend.outside = TRUE)</code></pre>
<center>
<img src="Image1_1.png" title="fig:" alt="““/Users/anwarmusah/Documents/GITHUB/UCLPG-MSC-SGDS/GEOG0114-PSA-WK8”" />
</center>
<p><a href="https://uclpg-msc-sgds.github.io/GEOG0114-PSA-WK8/classification.html"><strong>&gt;&gt; Proceed to the next section &gt;&gt;</strong></a></p>
<hr style="border:2px solid gray">
</hr>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
